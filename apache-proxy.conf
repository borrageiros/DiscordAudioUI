<VirtualHost *:443>
        ServerAdmin ubuntu@localhost
        ServerName radiogalaxia.borrageiros.com

        # WebSocket Proxy
        RewriteEngine On
        RewriteCond %{HTTP:Upgrade} =websocket [NC]
        RewriteRule /(.*)           ws://localhost:5173/$1 [P,L]

        RewriteCond %{HTTP:Upgrade} !=websocket [NC]
        RewriteRule /(.*)           http://localhost:5173/$1 [P,L]

        ProxyPreserveHost On
        ProxyPass "/" "http://localhost:5173/"
        ProxyPassReverse "/" http://localhost:5173/"

        SSLEngine on
        SSLCertificateFile /home/ubuntu/cloudflare/borrageiros.com.pem
        SSLCertificateKeyFile /home/ubuntu/cloudflare/borrageiros.com.key

        ErrorLog ${APACHE_LOG_DIR}/error.log
        CustomLog ${APACHE_LOG_DIR}/access.log combined

</VirtualHost>